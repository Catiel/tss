<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane fx:id="rootPane" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.simulation.gui.MainController">

    <!-- Top: Control Panel -->
    <top>
        <VBox spacing="10" style="-fx-background-color: #f5f5f5; -fx-padding: 10;">
            <!-- TÃ­tulo -->
            <HBox alignment="CENTER" spacing="10">
          <Label text="ðŸ­ SimulaciÃ³n de LÃ­nea de ProducciÃ³n"
              style="-fx-font-size: 18px; -fx-font-weight: bold;"/>
            </HBox>

            <!-- Controles principales -->
            <HBox spacing="10" alignment="CENTER_LEFT" style="-fx-padding: 5;">
        <Button fx:id="startButton" text="â–¶ Iniciar"
            style="-fx-font-size: 12px; -fx-padding: 6 14;"/>
        <Button fx:id="pauseButton" text="â¸ Pausar"
            style="-fx-font-size: 12px; -fx-padding: 6 14;"/>
        <Button fx:id="resetButton" text="ðŸ”„ Reiniciar"
            style="-fx-font-size: 12px; -fx-padding: 6 14;"/>
                <Separator orientation="VERTICAL"/>
        <Button fx:id="parametersButton" text="âš™ ParÃ¡metros"
            style="-fx-font-size: 12px; -fx-padding: 6 14;"/>

                <Region HBox.hgrow="ALWAYS"/>

          <Label fx:id="timeLabel" text="Tiempo: 00:00 h"
              style="-fx-font-size: 18px; -fx-font-weight: bold;"/>
            </HBox>

            <!-- Control de velocidad -->
            <HBox spacing="10" alignment="CENTER_LEFT" style="-fx-padding: 5;">
          <Label text="Velocidad de SimulaciÃ³n:" style="-fx-font-size: 14px;"/>
                <Slider fx:id="speedSlider" prefWidth="200" />
          <Label fx:id="speedLabel" text="Velocidad: 1.0x"
              style="-fx-font-size: 15px; -fx-min-width: 130; -fx-font-weight: bold;"/>
            </HBox>

            <!-- Barra de estado -->
            <HBox spacing="10" alignment="CENTER_LEFT" style="-fx-padding: 5;">
          <Label fx:id="statusLabel" text="Estado: Listo"
              style="-fx-font-size: 15px; -fx-text-fill: #444; -fx-font-weight: bold;"/>
            </HBox>
        </VBox>
    </top>

    <!-- Center: Main Content -->
    <center>
        <TabPane fx:id="mainTabPane" tabClosingPolicy="UNAVAILABLE">
            <!-- PestaÃ±a de AnimaciÃ³n -->
            <Tab fx:id="animationTab" text="ðŸŽ¬ AnimaciÃ³n">
                <SplitPane orientation="VERTICAL">
                    <items>
                        <ScrollPane fx:id="animationScrollPane" fitToWidth="true" fitToHeight="false" pannable="true"
                                    hbarPolicy="AS_NEEDED" vbarPolicy="AS_NEEDED"
                                    style="-fx-background-color: transparent;">
                        </ScrollPane>
               <VBox spacing="8" style="-fx-padding: 10;">
                <Label text="EstadÃ­sticas de Locaciones (tiempo real)"
                    style="-fx-font-size: 14px; -fx-font-weight: bold;"/>
        <TableView fx:id="locationTable" VBox.vgrow="ALWAYS"
            style="-fx-font-size: 13px;">
                                <columnResizePolicy>
                                    <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                                </columnResizePolicy>
                                <columns>
                                    <TableColumn fx:id="locNameCol" text="LocaciÃ³n" prefWidth="150"/>
                                    <TableColumn fx:id="locCapacityCol" text="Capacidad" prefWidth="90"/>
                                    <TableColumn fx:id="locScheduledTimeCol" text="Tiempo Programado (Hr)" prefWidth="160"/>
                                    <TableColumn fx:id="locEntriesCol" text="Total Entradas" prefWidth="110"/>
                                    <TableColumn fx:id="locTimePerEntryCol" text="Tiempo/Entrada (min)" prefWidth="140"/>
                                    <TableColumn fx:id="locAvgContentCol" text="Contenido Prom" prefWidth="120"/>
                                    <TableColumn fx:id="locMaxContentCol" text="Contenido MÃ¡x" prefWidth="110"/>
                                    <TableColumn fx:id="locCurrentContentCol" text="Contenido Actual" prefWidth="120"/>
                                    <TableColumn fx:id="locUtilizationCol" text="UtilizaciÃ³n" prefWidth="100"/>
                                </columns>
                            </TableView>
                        </VBox>
                    </items>
                </SplitPane>
            </Tab>

            <!-- PestaÃ±a de GrÃ¡ficas -->
            <Tab fx:id="chartsTab" text="ðŸ“Š GrÃ¡ficas">
                <!-- El contenido se agrega dinÃ¡micamente desde el controller -->
            </Tab>

            <!-- PestaÃ±a de Resultados -->
            <Tab fx:id="resultsTab" text="ðŸ“‹ Resultados Detallados">
                <VBox spacing="10" style="-fx-padding: 12;">
                            <Label text="Resumen de Entidades"
                                    style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
                    <TextArea fx:id="entityStatsText" editable="false"
                                    style="-fx-font-family: 'Courier New'; -fx-font-size: 13px;"
                              VBox.vgrow="ALWAYS"/>
                </VBox>
            </Tab>
        </TabPane>
    </center>

    <!-- Bottom: Additional Info -->
    <bottom>
        <HBox spacing="10" alignment="CENTER" style="-fx-background-color: #e0e0e0; -fx-padding: 5;">
            <Label text="ProModel Java Implementation Â© 2025 | Sincronizado con AnimaciÃ³n y EstadÃ­sticas en Tiempo Real"
                   style="-fx-font-size: 10px; -fx-text-fill: #666;"/>
        </HBox>
    </bottom>
</BorderPane>