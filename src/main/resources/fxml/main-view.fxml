<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane fx:id="rootPane" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.simulation.gui.MainController">

    <!-- Top: Control Panel -->
    <top>
        <VBox spacing="10" style="-fx-background-color: #f5f5f5; -fx-padding: 10;">
            <!-- Título -->
            <HBox alignment="CENTER" spacing="10">
                <Label text="🏭 Simulación de Línea de Producción"
                       style="-fx-font-size: 20px; -fx-font-weight: bold;"/>
            </HBox>

            <!-- Controles principales -->
            <HBox spacing="10" alignment="CENTER_LEFT" style="-fx-padding: 5;">
                <Button fx:id="startButton" text="▶ Iniciar"
                        style="-fx-font-size: 14px; -fx-padding: 8 16;"/>
                <Button fx:id="pauseButton" text="⏸ Pausar"
                        style="-fx-font-size: 14px; -fx-padding: 8 16;"/>
                <Button fx:id="resetButton" text="🔄 Reiniciar"
                        style="-fx-font-size: 14px; -fx-padding: 8 16;"/>
                <Separator orientation="VERTICAL"/>
                <Button fx:id="parametersButton" text="⚙ Parámetros"
                        style="-fx-font-size: 14px; -fx-padding: 8 16;"/>

                <Region HBox.hgrow="ALWAYS"/>

                <Label fx:id="timeLabel" text="Tiempo: 0.00 min"
                       style="-fx-font-size: 14px; -fx-font-weight: bold;"/>
            </HBox>

            <!-- Control de velocidad -->
            <HBox spacing="10" alignment="CENTER_LEFT" style="-fx-padding: 5;">
                <Label text="Velocidad de Simulación:" style="-fx-font-size: 12px;"/>
                <Slider fx:id="speedSlider" prefWidth="200" />
                <Label fx:id="speedLabel" text="Velocidad: 1.0x"
                       style="-fx-font-size: 12px; -fx-min-width: 120;"/>
            </HBox>

            <!-- Barra de estado -->
            <HBox spacing="10" alignment="CENTER_LEFT" style="-fx-padding: 5;">
                <Label fx:id="statusLabel" text="Estado: Listo"
                       style="-fx-font-size: 12px; -fx-text-fill: #666;"/>
            </HBox>
        </VBox>
    </top>

    <!-- Center: Main Content -->
    <center>
        <TabPane fx:id="mainTabPane" tabClosingPolicy="UNAVAILABLE">
            <!-- Pestaña de Animación -->
            <Tab fx:id="animationTab" text="🎬 Animación">
                <!-- El contenido se agrega dinámicamente desde el controller -->
            </Tab>

            <!-- Pestaña de Resultados -->
            <Tab fx:id="resultsTab" text="📊 Resultados">
                <TabPane fx:id="resultsTabPane" tabClosingPolicy="UNAVAILABLE">
                    <!-- Estadísticas de Locaciones -->
                    <Tab fx:id="locationStatsTab" text="Estadísticas de Locaciones">
                        <VBox spacing="5" style="-fx-padding: 10;">
                            <Label text="Resumen de Locaciones"
                                   style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
                            <TableView fx:id="locationTable" VBox.vgrow="ALWAYS">
                                <columns>
                                    <TableColumn fx:id="locNameCol" text="Locación" prefWidth="150"/>
                                    <TableColumn fx:id="locCapacityCol" text="Capacidad" prefWidth="80"/>
                                    <TableColumn fx:id="locEntriesCol" text="Total Entradas" prefWidth="100"/>
                                    <TableColumn fx:id="locTimePerEntryCol" text="Tiempo/Entrada (min)" prefWidth="140"/>
                                    <TableColumn fx:id="locAvgContentCol" text="Contenido Prom" prefWidth="120"/>
                                    <TableColumn fx:id="locMaxContentCol" text="Contenido Máx" prefWidth="110"/>
                                    <TableColumn fx:id="locCurrentContentCol" text="Contenido Actual" prefWidth="120"/>
                                    <TableColumn fx:id="locUtilizationCol" text="Utilización" prefWidth="100"/>
                                </columns>
                            </TableView>
                        </VBox>
                    </Tab>

                    <!-- Estadísticas de Entidades -->
                    <Tab fx:id="entityStatsTab" text="Estadísticas de Entidades">
                        <VBox spacing="5" style="-fx-padding: 10;">
                            <Label text="Resumen de Entidades"
                                   style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
                            <TextArea fx:id="entityStatsText" editable="false"
                                      style="-fx-font-family: 'Courier New'; -fx-font-size: 12px;"
                                      VBox.vgrow="ALWAYS"/>
                        </VBox>
                    </Tab>
                </TabPane>
            </Tab>
        </TabPane>
    </center>

    <!-- Bottom: Additional Info (opcional) -->
    <bottom>
        <HBox spacing="10" alignment="CENTER" style="-fx-background-color: #e0e0e0; -fx-padding: 5;">
            <Label text="ProModel Java Implementation © 2025"
                   style="-fx-font-size: 10px; -fx-text-fill: #666;"/>
        </HBox>
    </bottom>
</BorderPane>
